"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2161],{33818:function(t,e,r){r.d(e,{rc:function(){return v},sj:function(){return m}});var n=r(67294),i=r(81759),o=r(36188),l=r(32751),s=r(87598),a=r(66830),d=r(42209),u=r(14484),c=r(68955),h=r(96165),f=r(8811);let p=(t,e,r)=>async function(){let{signal:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.uz)("".concat(d.apiBaseUrl,"/api/v1/flag-counts/").concat(t,"/").concat(e),{ids:r},{abortSignal:n})},g=function(t,e,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return(0,s.BN)("".concat(d.apiBaseUrl,"/api/v1/flag/").concat(t,"/").concat(r,"/").concat(e),{headers:{"X-CSRF-Token":i},method:n?"POST":"DELETE"})},y={data:void 0,error:void 0,isError:!1,isFetching:!1,isPending:!1},w=[],v=function(t,e){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],o=(0,n.useMemo)(()=>{if(!r||!(null==e?void 0:e.length))return w;let n={enabled:!!r&&(null==e?void 0:e.length)>0},i=[];for(let r=0;r<e.length;r+=50){let o=e.slice(r,r+50);i.push({queryKey:a.O.Favorites({type:t,hashId:o.reduce((t,e)=>"number"==typeof e&&"number"==typeof t?(31*t+e)%Number.MAX_SAFE_INTEGER:String(t).concat(String(e)),"number"==typeof(null==e?void 0:e[0])?23:"")}),queryFn:p(t,"favourite",o),...n})}return i},[e,t,r]);return(0,i.h)({queries:o,combine:t=>({data:t.reduce((t,e)=>(Object.assign(t,e.data),t),{}),isPending:t.some(t=>t.isPending),isFetching:t.some(t=>t.isFetching),isSuccess:t.every(t=>t.isSuccess)})})||y},m=()=>{let{showRawpixelTeam:t}=(0,h.ZP)(),e=(0,u.EC)(),{activeTeam:r}=(0,f.Z)(),i=(0,l.Z)(),{mutate:s}=(0,o.D)({mutationFn:t=>g(t.type,"favourite",t.id,t.flagged,e.token),onMutate:t=>{let{type:e,id:r,flagged:n}=t,o=i.mutate(a.O.Favorites(),t=>t.type===e,t=>{if(t[r]){let e={count:n?t[r].count+1:t[r].count-1,flagged:n};return{...t,[r]:e}}return null});return o.commit(),{transaction:o}},onError:(t,e,r)=>{let{transaction:n}=r;n.rollback()},onSuccess:(e,n)=>{let{type:o,userId:l}=n;switch(o){case"topic":case"widget":i.reset(a.O.Topics(),t=>parseInt(t[c.Z.COMMON.FLAGGED_BY],10)===l,!1),t&&i.invalidate(a.O.FlaggedIds());break;case"image":i.reset(a.O.Images(),t=>parseInt(t[c.Z.COMMON.FLAGGED_BY],10)===l,!1);break;case"board":case"category":i.reset(a.O.Boards(),t=>parseInt(t[c.Z.COMMON.FLAGGED_BY],10)===l||parseInt(t[c.Z.COMMON.ACCOUNT_ID],10)===l,!1);break;case"project":i.reset(a.O.Projects(),t=>parseInt(t[c.Z.COMMON.FLAGGED_BY],10)===l||!!r&&parseInt(t[c.Z.COMMON.TEAM_ID],10)===r.id,!1)}}});return n.useMemo(()=>({set:(t,e,r,n)=>{s({type:e,userId:t,id:r,flagged:n})}}),[s])}},32996:function(t,e,r){let n;var i=r(85893),o=r(67294),l=r(10508),s=r(6547);let a=l.ZP.img.withConfig({componentId:"sc-b1fabf4e-0"})(["color:transparent;&:not([src]):not([srcset]),&.lazy-image-error{visibility:hidden;}"]);e.Z=t=>{let{alt:e="",width:r,height:l,style:d,src:u,srcSet:c,...h}=t,f=function(){let[t,e]=(0,o.useState)(n);return(0,o.useEffect)(()=>{void 0===n&&(n="loading"in HTMLImageElement.prototype),e(n)},[]),t}(),{ref:p,inView:g}=(0,s.Y)({triggerOnce:!0,rootMargin:"200px 0px",skip:f}),y=g||f,w=o.useMemo(()=>{let t={...h};return f&&(t.loading="lazy"),y&&c&&(t.srcSet=c),y&&u&&(t.src=u),t},[h,u,c,f,y]);return(0,i.jsx)(a,{alt:e,style:d||{},ref:p,...w,crossOrigin:"anonymous",width:r,height:l,onError:t=>{t.currentTarget.classList.add("lazy-image-error")},onLoad:t=>{let{classList:e}=t.currentTarget;e.contains("lazy-image-error")&&e.remove("lazy-image-error")}})}},80602:function(t,e,r){var n=r(10508),i=r(68365);let o=n.ZP.div.withConfig({componentId:"sc-7adbd4be-0"})(["position:absolute;transition:opacity 0.2s ease-in-out;display:flex;flex-wrap:wrap;overflow:hidden;pointer-events:none;> *{pointer-events:auto;margin:2px;}&.full{inset:0;top:0;left:0;right:0;bottom:0;align-items:center;justify-content:center;}&.top{top:0;padding-top:4px;}&.left{left:0;padding-left:4px;}&.bottom{bottom:0;padding-bottom:4px;}&.right{right:0;padding-right:4px;}&.justified{left:0;right:0;padding-left:4px;padding-right:4px;}&.reverse{flex-wrap:wrap-reverse;}.filler{pointer-events:none;flex-grow:1;}@media (hover:hover) and (pointer:fine){opacity:0;.is-popup-active &{opacity:1;}}","{opacity:1;}","{display:none;}"],i.Mq,i.ai);e.Z=o},28668:function(t,e,r){r.d(e,{$R:function(){return o},CX:function(){return f},D8:function(){return c},O6:function(){return s},P8:function(){return h},Pm:function(){return d},Vs:function(){return a},eE:function(){return i},m3:function(){return u},zT:function(){return l}});var n=r(68365);let i=[{width:0,style:"masonry",prefWidth:300,buttons:"none"},{width:n.tu,style:"rowgrid",prefHeight:300,buttons:"overlay"},{width:1300,style:"rowgrid",prefHeight:340,buttons:"overlay"}],o=[{width:0,style:"rowgrid",prefHeight:300,buttons:"mobile"},{width:1300,style:"rowgrid",prefHeight:340,buttons:"overlay"}],l=[{width:0,style:"masonry",prefWidth:300,buttons:"boost"},{width:n.tu,style:"rowgrid",prefHeight:300,buttons:"overlay"},{width:1300,style:"rowgrid",prefHeight:340,buttons:"overlay"}],s=[{width:0,style:"rowgrid",prefHeight:300,buttons:"mobile"},{width:n.tu,style:"rowgrid",prefHeight:300,buttons:"overlay"},{width:1300,style:"rowgrid",prefHeight:410,buttons:"overlay"},{width:1600,style:"rowgrid",prefHeight:440,buttons:"overlay"}];n.tu;let a=[{width:0,style:"masonry",prefWidth:300,buttons:"none"},{width:567,style:"masonry",prefWidth:306,buttons:"overlay"},{width:918,style:"masonry",prefWidth:342,buttons:"overlay"},{width:1368,style:"masonry",prefWidth:456,buttons:"overlay"},{width:1679,style:"masonry",prefWidth:420,buttons:"overlay"}],d=[{width:0,style:"rowgrid",prefHeight:300,buttons:"mobile"},{width:567,style:"masonry",prefWidth:306,buttons:"overlay"},{width:918,style:"masonry",prefWidth:342,buttons:"overlay"},{width:1368,style:"masonry",prefWidth:456,buttons:"overlay"},{width:1679,style:"masonry",prefWidth:420,buttons:"overlay"}],u=[{width:0,style:"masonry",prefWidth:200,margin:8}],c=[{width:0,style:"masonry",prefWidth:90,margin:8}],h=[{width:0,style:"rowgrid",prefHeight:800,margin:8,buttons:"overlay"}],f=[{width:0,style:"rowgrid",prefHeight:240}]},70965:function(t,e,r){r.d(e,{Q5:function(){return c},YW:function(){return u},ZL:function(){return l}});var n=r(67294),i=r(10508),o=r(68365);let l=t=>[!!t.find(t=>"overlay"===t.buttons),!!t.find(t=>"mobile"===t.buttons),!!t.find(t=>"boost"===t.buttons)],s=i.ZP.div.withConfig({componentId:"sc-5552ebb0-0"})([".inner-wrapper{margin:-","px;","{margin:-","px;}> div{margin:","px;","{margin:","px;}}}.rowgrid.inner-wrapper{display:flex;flex-wrap:wrap;> div{","{width:100% !important;}}}.masonry.inner-wrapper{display:flex;position:relative;> div{position:absolute;height:auto;}}"],9,o.ai,5,9,o.ai,5,o.ai),a=(t,e,r,n,i)=>{if(-1===t||!n)return[];let o=r.prefHeight,l=[];if(n.length){let r=0,s=0;n.forEach((a,d)=>{let[u,c]=i(a);if(l[d]={width:u/c*o},(r=r+e+l[d].width)>t+e||d===n.length-1){let n=(d-s+1)*e,i=t-n,o=Math.max(i,r-n);for(let r=s;r<=d;r++){let n=(l[r].width/o*i+e)/t*100;l[r].width="calc(".concat(n,"% - ").concat(e,"px)")}r=0,s=d+1}})}return l},d=(t,e,r,n,i)=>{if(-1===t||!(null==n?void 0:n.length))return[];let o=Math.ceil(t/r.prefWidth),l=Math.round((t-e*o)/o),s=[];for(let t=0;t<o;t++)s.push([]);let a=t=>{var r,n,i;let o=0;for(let e=0;e<t.length;e++){let r=t[e],l=null===(n=r[(null==r?void 0:r.length)-1||0])||void 0===n?void 0:n.runningHeight,s=t[o];if(l)l<(null===(i=s[(null==s?void 0:s.length)-1||0])||void 0===i?void 0:i.runningHeight)&&(o=e);else{o=e;break}}let s=t[o];return[o*(l+e),(null===(r=s[(null==s?void 0:s.length)-1||0])||void 0===r?void 0:r.runningHeight)||0,s]};for(let t=0;t<n.length;t++){let[r,o,d]=a(s),u=Math.round(i(n[t],l,window.innerWidth)),c={width:"".concat(l,"px"),left:"".concat(r,"px"),top:"".concat(o,"px"),topPx:o,index:t,probableHeight:u,runningHeight:o+u+e};d.push(c)}return s},u=(t,e,r,n,i)=>{let l=()=>{try{let l=t.current.children,s=t.current.clientWidth,u=r[0].margin||window.innerWidth<o.tu?10:18,c=r.reduce((t,e)=>e.width<s?e:t,r[0]);if(t.current.style.minHeight=0,"rowgrid"===c.style){t.current.style.height="auto";let r=a(s,u,c,e,n);t.current.classList.remove("masonry"),t.current.classList.add("rowgrid"),r.forEach((t,e)=>{l[e].style.width=t.width,l[e].style.left=null,l[e].style.top=null,l[e].style.display="block"})}else if("masonry"===c.style&&-1!==s&&e){let r=d(s,u,c,e,i);t.current.classList.remove("rowgrid"),t.current.classList.add("masonry");for(let t=0;t<r.length;t++)for(let e=0;e<r[t].length;e++){let n=r[t][e];l[n.index].style.left=n.left,l[n.index].style.top=n.top,l[n.index].style.width=n.width,l[n.index].style.display="block"}for(let t=0;t<r.length;t++)for(let e=0,n=0;e<r[t].length;e++){let i=r[t][e],o=l[i.index].clientHeight-i.probableHeight;0!==n&&(l[i.index].style.top="".concat(i.topPx+n,"px")),0!==o&&(n+=o)}let n=0;for(let t=0;t<r.length;t++){let e=r[t],i=e[(null==e?void 0:e.length)-1||0];if(i){let t=l[i.index].offsetTop+l[i.index].clientHeight+u;n=Math.max(t,n)}}t.current.style.height="".concat(n,"px")}}catch(t){}};return l(),window.addEventListener("resize",l),window.addEventListener("com.rawpixel.rowgrid.relayout",l),()=>{window.removeEventListener("resize",l),window.removeEventListener("com.rawpixel.rowgrid.relayout",l)}},c=()=>{window.dispatchEvent(new Event("com.rawpixel.rowgrid.relayout"))};e.ZP=n.memo(s)},6547:function(t,e,r){r.d(e,{Y:function(){return u},b:function(){return d}});var n=r(85893),i=r(67294),o=r(42708),l=r(10508);let s=i.createContext(),a=l.ZP.div.withConfig({componentId:"sc-6d8c7f2e-0"})(["overflow-y:scroll;scrollbar-width:none;&::-webkit-scrollbar{display:none;}"]),d=t=>{let{children:e,forwardRef:r,className:o}=t,l=i.useRef(),d=i.useRef(),u=i.useCallback(t=>{r&&(r.current=t),l.current=t,d.current={root:t}},[r]);return(0,n.jsx)(s.Provider,{value:d.current,children:(0,n.jsx)(a,{ref:u,className:o,translate:"no",children:e})})},u=t=>{let e=(0,i.useContext)(s);if(t.root)throw Error("Cannot set options.root with useInViewWithScrollProvider, use useInView directly");let r=i.useMemo(()=>e?e.root?{...t,root:e.root}:{...t,skip:!0}:t,[e,t]);return(0,o.YD)(r)}},2487:function(t,e,r){var n=r(67294),i=r(24843),o=r(14749),l=r(20774),s=r(15994);e.Z=function(t,e,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"style_uri",d=arguments.length>4?arguments[4]:void 0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:s.tp["900"],{width:c}=(0,i.i)(),[h,f]=(0,n.useState)({src:"",defaultSrc:"",size:0}),[p,g]=(0,n.useState)(0),y=(0,n.useRef)();return(0,n.useEffect)(()=>{var n;let i=null===(n=r.current)||void 0===n?void 0:n.clientWidth,s=Math.min(Math.round(185*Math.round((i||0)/100)),(i||0)*(0,l.m)());if(y.current===t&&s<=p)return;y.current=t;let c=(0,o.ts)(s),h=!u||c<u?c:u;f({src:(0,o._N)(e,h,a,d),defaultSrc:(0,o._N)(e,400,a,d),size:h}),g(s)},[t,r,c,p,e,a,d,u]),h}},20774:function(t,e,r){r.d(e,{m:function(){return i}});var n=r(65686);function i(){let t=(0,n.Y7)()?1:2,e=Math.max(t,window.devicePixelRatio||t);return e>2.5?e*=.65:e>=1.85?e*=.77:e-=.01,Math.max(.99,e)}}}]);